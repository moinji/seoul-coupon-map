# 💸 서울 소비쿠폰 사용처 시각화 웹앱

Streamlit 기반의 **서울 민생회복 소비쿠폰 사용처를 지도에서 직관적으로 확인**할 수 있는 대시보드입니다.  
사용자의 현재 위치 기준 반경 내 가맹점 탐색, 업종/지역 필터링, 데이터 분석 기능까지 포함되어 있습니다.

---

## 📌 주요 기능

- ✅ **지도 시각화 (Kakao Map 기반, 마커 클러스터)**
- ✅ **업종 / 자치구 필터링 기능**
- ✅ **내 위치 기반 반경 내 매장 탐색** (`GPS 위치 감지 버튼`)
- ✅ **최대 1000개 매장까지 마커 시각화**
- ✅ **카카오맵 상에서 반경 시각화 및 내 위치 표시**
- ✅ **성동구청 소비쿠폰 가맹점 데이터 크롤링 및 분석 탭**
- ✅ **CSV 다운로드 및 다양한 통계 시각화**

---

## 🚀 실행 방법

```bash
# 가상환경 추천
python -m venv venv
source venv/bin/activate  # (Windows: venv\Scripts\activate)

# 패키지 설치
pip install -r requirements.txt

# 실행
streamlit run app.py
```

# 프로젝트 모듈화 요약

## 📂 디렉토리 구조 및 파일별 역할

### 1. 최상위 디렉토리 (`/`)

- **`app.py` (메인 애플리케이션)**
  - Streamlit 애플리케이션의 **시작점(Entry Point)**입니다.
  - 전체 UI 레이아웃(페이지 설정, 제목 등)을 구성하고, 각 모듈을 호출하여 웹 앱의 전체 흐름을 제어합니다.
  - 사용자의 입력을 받고, 필터링된 데이터를 각 컴포넌트에 전달하는 **중심 제어** 역할을 합니다.

- **`config.py` (설정 관리)**
  - 데이터 파일의 경로, API 키를 참조하는 환경 변수 이름 등 프로젝트 전반에서 사용되는 **설정 값들을 상수로 관리**합니다.
  - 설정이 변경될 때 이 파일만 수정하면 되므로 유지보수성이 향상됩니다.

### 2. `components` (UI 컴포넌트)

- **`ui.py` (UI 생성)**
  - Streamlit의 주요 UI 요소(사이드바, 통계 카드, 탭 등)를 생성하는 함수들을 모아놓은 모듈입니다.
  - `app.py`의 코드가 UI 생성 코드로 길어지는 것을 방지하고, **UI 관련 로직을 분리**하여 코드를 더 깔끔하게 관리합니다.

- **`kakao_map.py` (카카오맵 생성)**
  - 필터링된 데이터프레임을 입력받아 **카카오맵을 표시하는 HTML 코드를 생성**하는 역할을 전담합니다.
  - 지도와 관련된 복잡한 JavaScript 및 HTML 코드를 별도의 파일로 분리하여 관리합니다.

### 3. `services` (외부 서비스 연동)

- **`kakao_api.py` (카카오 API 연동)**
  - 카카오의 REST API를 호출하여 **주소를 위도와 경도로 변환(지오코딩)**하는 기능을 담당합니다.
  - API 연동과 관련된 로직(요청, 응답 처리, 에러 핸들링 등)을 분리하여 관리합니다.

- **`seongdong_scraper.py` (웹 스크래핑)**
  - **성동구청 웹사이트**에서 소비쿠폰 가맹점 정보를 **스크래핑(크롤링)**하는 기능을 담당합니다.
  - Selenium 라이브러리를 사용하며, 웹 드라이버 설정부터 데이터 추출까지의 모든 과정을 이 파일에서 처리합니다.

### 4. `utils` (공용 유틸리티)

- **`data_loader.py` (데이터 로딩 및 전처리)**
  - CSV 파일을 읽고, 애플리케이션에서 사용하기 쉬운 형태로 **데이터를 전처리하는 모든 과정을 담당**합니다.
  - (예: 컬럼명 변경, 데이터 타입 변환, 결측치 처리, 'district' 컬럼 생성 등)
  - `@st.cache_data`를 활용하여 데이터 로딩 성능을 최적화합니다.

- **`helpers.py` (도우미 함수)**
  - 특정 기능에 종속되지 않고 **프로젝트 전반에서 사용될 수 있는 작은 함수**들을 모아놓은 모듈입니다.
  - (예: 두 좌표 간의 거리 계산, Matplotlib 한글 폰트 설정 등)

### 5. `analysis` (데이터 분석 및 시각화)

- **`main_analysis.py` (메인 데이터 분석)**
  - **전체 서울시 가맹점 데이터**를 기반으로 통계 분석 및 시각화(차트, 히트맵 등)를 생성하는 함수를 포함합니다.
  - `components/ui.py`의 '통계' 탭에서 이 모듈의 함수를 호출하여 사용합니다.

- **`seongdong_analysis.py` (성동구 데이터 분석)**
  - `services/seongdong_scraper.py`를 통해 **수집된 성동구 데이터에 특화된 분석 및 시각화** 로직을 담당합니다.
  - 데이터 수집부터 전처리, 분석까지의 과정을 하나의 탭에서 보여주는 독립적인 분석 모듈입니다.

